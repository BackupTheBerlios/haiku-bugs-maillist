<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-bugs/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%234091%3A%20r31522%20build%20breakage%20on%20parallel%0A%09jam&In-Reply-To=%3C053.5e5c15b6db079532dd683f6705485870%40haiku-os.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018432.html">
   <LINK REL="Next"  HREF="018449.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam</H1>
    <B>bonefish</B> 
    <A HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%234091%3A%20r31522%20build%20breakage%20on%20parallel%0A%09jam&In-Reply-To=%3C053.5e5c15b6db079532dd683f6705485870%40haiku-os.org%3E"
       TITLE="[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam">trac at haiku-os.org
       </A><BR>
    <I>Sun Jul 12 17:15:52 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018432.html">[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam
</A></li>
        <LI>Next message: <A HREF="018449.html">[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18446">[ date ]</a>
              <a href="thread.html#18446">[ thread ]</a>
              <a href="subject.html#18446">[ subject ]</a>
              <a href="author.html#18446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>#4091: r31522 build breakage on parallel jam
--------------------------+-------------------------------------------------
 Reporter:  meianoite     |       Owner:  bonefish      
     Type:  bug           |      Status:  new           
 Priority:  normal        |   Milestone:  R1/alpha1     
Component:  Build System  |     Version:  R1 development
Blockedby:                |    Platform:  All           
 Blocking:                |  
--------------------------+-------------------------------------------------

Comment(by bonefish):

 Replying to [comment:8 meianoite]:
 &gt; Replying to [comment:7 bonefish]:
 &gt; &gt; The dependencies look OK for both cases, so I'd consider this a jam
 bug.
 &gt;
 &gt; Some revisions ago I couldn't trigger this either, remember? Those are
 always timing-dependent, but I manage to reproduce this quite easily now.
 I just have to call a parallel jam and do a &quot;make -j8 index&quot; on /usr/ports
 to generate a lot of disk activity. But I don't think this is a jam bug at
 all. I don't really understand how Jam generates its dependency trees, but
 after some investigation I found that parse.h is generated by the Yacc1
 rule being applied to parse.y:
 [...]
 &gt; but nowhere is parse.h declared dependent on parse.y.

 You are mistaken. The Yacc rule establishes that dependency.

 &gt; So it's very probable Jam simply launched the shell that compiles
 print_cmd.c independently. Does this make sense to you?

 Nope. As I wrote, I checked the dependencies jam knows of (&quot;jam -dd&quot;) and
 they look OK. If jam nevertheless executes the actions for dependent
 targets out of order respectively starts the actions for the dependent
 target before those for the dependency have finished, it's obviously a bug
 in jam. Or in the job management functionality it uses (mainly wait()).

 &gt; Replying to [comment:7 bonefish]:
 &gt; &gt; Under Haiku I couldn't reproduce it (two cores only, though). Am I
 assuming correctly that your build platform is FreeBSD? Would be
 interesting, if this can be reproduced on Linux, too.

 I tried a few runs under Linux (still with 2 cores only) and bash was
 always built successfully.

-- 
Ticket URL: &lt;<A HREF="http://dev.haiku-os.org/ticket/4091#comment:9">http://dev.haiku-os.org/ticket/4091#comment:9</A>&gt;
Haiku &lt;<A HREF="http://dev.haiku-os.org">http://dev.haiku-os.org</A>&gt;
The Haiku operating system.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018432.html">[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam
</A></li>
	<LI>Next message: <A HREF="018449.html">[Haiku-bugs] [Haiku] #4091: r31522 build breakage on parallel	jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18446">[ date ]</a>
              <a href="thread.html#18446">[ thread ]</a>
              <a href="subject.html#18446">[ subject ]</a>
              <a href="author.html#18446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-bugs">More information about the Haiku-bugs
mailing list</a><br>
</body></html>
