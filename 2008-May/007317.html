<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-bugs] [Haiku] #1620: Firefox crashes with &quot;-safe-mode&quot;	switch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-bugs/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%231620%3A%20Firefox%20crashes%20with%20%22-safe-mode%22%0A%09switch&In-Reply-To=%3C055.6ca85d7162a79ecbfddb0b24dd623b1f%40haiku-os.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007316.html">
   <LINK REL="Next"  HREF="007318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-bugs] [Haiku] #1620: Firefox crashes with &quot;-safe-mode&quot;	switch</H1>
    <B>Haiku</B> 
    <A HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%231620%3A%20Firefox%20crashes%20with%20%22-safe-mode%22%0A%09switch&In-Reply-To=%3C055.6ca85d7162a79ecbfddb0b24dd623b1f%40haiku-os.org%3E"
       TITLE="[Haiku-bugs] [Haiku] #1620: Firefox crashes with &quot;-safe-mode&quot;	switch">trac at haiku-os.org
       </A><BR>
    <I>Wed May 14 20:28:02 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007316.html">[Haiku-bugs] [Haiku] #2185: Scan the source tree and use find_directory() where appropriate (no hard-coded paths anymore)
</A></li>
        <LI>Next message: <A HREF="007318.html">[Haiku-bugs] [Haiku] #1620: Firefox crashes with &quot;-safe-mode&quot;	switch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7317">[ date ]</a>
              <a href="thread.html#7317">[ thread ]</a>
              <a href="subject.html#7317">[ subject ]</a>
              <a href="author.html#7317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>#1620: Firefox crashes with &quot;-safe-mode&quot; switch
--------------------------------+-------------------------------------------
  Reporter:  umccullough        |       Owner:  axeld         
      Type:  bug                |      Status:  new           
  Priority:  normal             |   Milestone:  R1            
 Component:  System/libroot.so  |     Version:  R1 development
Resolution:                     |    Platform:  x86           
--------------------------------+-------------------------------------------
Comment (by mjw):

 I have been working on freeciv and have noticed the same problem.

 What happens in freeciv's case is that some elements of argv are set to
 NULL before the BApplication object is instantiated.  argc is unchanged.
 Eventually, BApplication::_ArgvReceived() is called with the correct value
 of argc, but all the NULL elements of argv are missing (so argc &gt; num
 elements in argv).

 So, to cut a long story short, the free(argv[i]) call in _ArgvReceived()
 ends up freeing random pointers, causing the crash.

 I have attached a patch that fixes this bug.

-- 
Ticket URL: &lt;<A HREF="http://dev.haiku-os.org/ticket/1620#comment:3">http://dev.haiku-os.org/ticket/1620#comment:3</A>&gt;
Haiku &lt;<A HREF="http://dev.haiku-os.org">http://dev.haiku-os.org</A>&gt;
The Haiku operating system.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007316.html">[Haiku-bugs] [Haiku] #2185: Scan the source tree and use find_directory() where appropriate (no hard-coded paths anymore)
</A></li>
	<LI>Next message: <A HREF="007318.html">[Haiku-bugs] [Haiku] #1620: Firefox crashes with &quot;-safe-mode&quot;	switch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7317">[ date ]</a>
              <a href="thread.html#7317">[ thread ]</a>
              <a href="subject.html#7317">[ subject ]</a>
              <a href="author.html#7317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-bugs">More information about the Haiku-bugs
mailing list</a><br>
</body></html>
