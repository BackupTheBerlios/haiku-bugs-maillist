<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-bugs/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%233983%3A%20KDL%20when%20ejecting%20not%20mounted%20CD&In-Reply-To=%3C053.5ac5eb6b15d9165da1de398a361efd55%40haiku-os.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017801.html">
   <LINK REL="Next"  HREF="017803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD</H1>
    <B>anevilyak</B> 
    <A HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%233983%3A%20KDL%20when%20ejecting%20not%20mounted%20CD&In-Reply-To=%3C053.5ac5eb6b15d9165da1de398a361efd55%40haiku-os.org%3E"
       TITLE="[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD">trac at haiku-os.org
       </A><BR>
    <I>Thu Jun  4 00:02:50 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="017801.html">[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD
</A></li>
        <LI>Next message: <A HREF="017803.html">[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17802">[ date ]</a>
              <a href="thread.html#17802">[ thread ]</a>
              <a href="subject.html#17802">[ subject ]</a>
              <a href="author.html#17802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>#3983: KDL when ejecting not mounted CD
---------------------------+------------------------------------------------
 Reporter:  anevilyak      |       Owner:  axeld         
     Type:  bug            |      Status:  new           
 Priority:  normal         |   Milestone:  R1/alpha1     
Component:  System/Kernel  |     Version:  R1 development
Blockedby:                 |    Platform:  All           
 Blocking:  3964           |  
---------------------------+------------------------------------------------
Changes (by anevilyak):

  * owner:  anevilyak =&gt; axeld
  * status:  assigned =&gt; new


Comment:

 The problem seems to be the change on line 256 of devfs.cpp:

 {{{
         255                     // pass the call through to the underlying
 device
         256                     vnode-&gt;stream.u.dev.device-&gt;Removed();
 }}}

 Removed() winds up getting called on eject, which results in the raw
 device deleting itself, hence the 0xdeadbeef above. What I'm uncertain
 about is how to determine when we should and should not be calling
 Removed().

-- 
Ticket URL: &lt;<A HREF="http://dev.haiku-os.org/ticket/3983#comment:20">http://dev.haiku-os.org/ticket/3983#comment:20</A>&gt;
Haiku &lt;<A HREF="http://dev.haiku-os.org">http://dev.haiku-os.org</A>&gt;
The Haiku operating system.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017801.html">[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD
</A></li>
	<LI>Next message: <A HREF="017803.html">[Haiku-bugs] [Haiku] #3983: KDL when ejecting not mounted CD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17802">[ date ]</a>
              <a href="thread.html#17802">[ thread ]</a>
              <a href="subject.html#17802">[ subject ]</a>
              <a href="author.html#17802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-bugs">More information about the Haiku-bugs
mailing list</a><br>
</body></html>
