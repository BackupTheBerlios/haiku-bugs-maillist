<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-bugs] [Haiku] #2573: Files taking *A LOT* more space on disk than the sum of their sizes.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-bugs/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%232573%3A%20Files%20taking%20%2AA%20LOT%2A%20more%20space%20on%0A%20disk%20than%20the%20sum%20of%20their%20sizes.&In-Reply-To=%3C047.0d56813a5a650e669b3c3ca344de0419%40haiku-os.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018139.html">
   <LINK REL="Next"  HREF="018146.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-bugs] [Haiku] #2573: Files taking *A LOT* more space on disk than the sum of their sizes.</H1>
    <B>axeld</B> 
    <A HREF="mailto:haiku-bugs%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-bugs%5D%20%5BHaiku%5D%20%232573%3A%20Files%20taking%20%2AA%20LOT%2A%20more%20space%20on%0A%20disk%20than%20the%20sum%20of%20their%20sizes.&In-Reply-To=%3C047.0d56813a5a650e669b3c3ca344de0419%40haiku-os.org%3E"
       TITLE="[Haiku-bugs] [Haiku] #2573: Files taking *A LOT* more space on disk than the sum of their sizes.">trac at haiku-os.org
       </A><BR>
    <I>Fri Jun 26 16:53:24 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018139.html">[Haiku-bugs] [Haiku] #1026: Black screen when Haiku switch to graphical mode after bootscreen GeForce 6150
</A></li>
        <LI>Next message: <A HREF="018146.html">[Haiku-bugs] [Haiku] #3432: PANIC: tried to get writable block on a read-only cache !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18144">[ date ]</a>
              <a href="thread.html#18144">[ thread ]</a>
              <a href="subject.html#18144">[ subject ]</a>
              <a href="author.html#18144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>#2573: Files taking *A LOT* more space on disk than the sum of their sizes.
-------------------------------+--------------------------------------------
  Reporter:  bga               |       Owner:  axeld         
      Type:  bug               |      Status:  closed        
  Priority:  high              |   Milestone:  R1            
 Component:  File Systems/BFS  |     Version:  R1 development
Resolution:  fixed             |   Blockedby:                
  Platform:  All               |    Blocking:                
-------------------------------+--------------------------------------------
Changes (by axeld):

  * status:  new =&gt; closed
  * resolution:  =&gt; fixed


Comment:

 The directory preallocations are now only 4K since r31253.

 Directory preallocations are only trimmed when their vnode is flushed,
 which doesn't happen that often when you have lots of memory. The Haiku
 source tree contained about 20000 directories - before, this could lead to
 a loss of 1.2 GB in preallocations. Now it's only 80 MB which I consider
 acceptable.

 A more refined solution would be to trim the preallocations after a
 certain time of inactivity, but I guess that's not worth the effort.

-- 
Ticket URL: &lt;<A HREF="http://dev.haiku-os.org/ticket/2573#comment:17">http://dev.haiku-os.org/ticket/2573#comment:17</A>&gt;
Haiku &lt;<A HREF="http://dev.haiku-os.org">http://dev.haiku-os.org</A>&gt;
The Haiku operating system.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018139.html">[Haiku-bugs] [Haiku] #1026: Black screen when Haiku switch to graphical mode after bootscreen GeForce 6150
</A></li>
	<LI>Next message: <A HREF="018146.html">[Haiku-bugs] [Haiku] #3432: PANIC: tried to get writable block on a read-only cache !
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18144">[ date ]</a>
              <a href="thread.html#18144">[ thread ]</a>
              <a href="subject.html#18144">[ subject ]</a>
              <a href="author.html#18144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-bugs">More information about the Haiku-bugs
mailing list</a><br>
</body></html>
